<!DOCTYPE html>
<html>
<head>
    <title>Heat Map</title>
    <!-- <script src="/public/js/action.js"></script> -->
    <style>
        body {
            margin: 0px;
        }
    </style>
</head>
<body>
    <div id="heatmap" style="position: relative; width: 50%; height: 100%;">
        <img src="/public/img/index.png" style="width: 100%; height: 50%;">
    </div>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="/public/js/heatmap.js"></script>
    <script>
        j=0;
        var mouseClickLocation = [
            {x: 420, y: 184},
            {x: 396, y: 245},
            {x: 353, y: 232},
            {x: 198, y: 188},
            {x: 169, y: 187},
            {x: 220, y: 205},
            {x: 799, y: 225},
            {x: 921, y: 232},
            {x: 924, y: 232},
            {x: 584, y: 232},
            {x: 354, y: 224},
            {x: 323, y: 218},
            {x: 392, y: 222},
            {x: 1050, y: 219},
            {x: 1050, y: 219},
            {x: 1050, y: 219},
            {x: 1179, y: 238},
            {x: 1185, y: 238},
            {x: 755, y: 221},
            {x: 471, y: 220},
            {x: 426, y: 224},
            {x: 421, y: 224},
            {x: 690, y: 206},
            {x: 925, y: 217},
            {x: 1023, y: 228},
            {x: 992, y: 202},
            {x: 737, y: 75},
            {x: 635, y: 36},
            {x: 599, y: 23},
            {x: 599, y: 23},
            {x: 599, y: 23},
            {x: 592, y: 22},
            {x: 590, y: 22},
            {x: 26, y: 281},
            {x: 48, y: 328}
        ]
        var newArray = [];
        $.each(mouseClickLocation, function(key, value) {
            var exists = false;
            $.each(newArray, function(k, val2) {
            if((value.x == val2.x) && (value.y == val2.y)){ exists = true };
            });
            if(exists == false && ((value.y != "") && (value.x != ""))) { newArray.push(value); }
        });
        window.onload = function() {
            var heatmapInstance = h337.create({
                container: document.getElementById('heatmap'),
                maxOpacity: .6,
                radius: 25,
                blur: .90
            });

            window.setInterval(function() {
                if(newArray.length >= (j+1)) {
                    var mouseX= newArray[j].x;
                    var mouseY= newArray[j].y;
                    heatmapInstance.addData({ 
                        x: mouseX/2,
                        y: mouseY/2,
                        value: 1
                    });
                    j++;
                }
            }, 100);
        };
        // var myArray = [
        //     {x: 420, y: 184},
        //     {x: 420, y: 184},
        //     {x: 420, y: 184},
        //     {x: 396, y: 245},
        //     {x: 353, y: 232},
        //     {x: 397, y: 245},
        //     {x: 198, y: 184},
        //     {x: 396, y: 246},
        //     {x: 169, y: 184},
        // ];
    

        // var newArray = [];
        // $.each(myArray, function(key, value) {
        //     var exists = false;
        //     $.each(newArray, function(k, val2) {
        //     if((value.x == val2.x) && (value.y == val2.y)){ exists = true };
        //     });
        //     if(exists == false && ((value.y != "") && (value.x != ""))) { newArray.push(value); }
        // });
        // console.log(newArray)
    
    </script>
</body>
</html>